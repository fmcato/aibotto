#!/bin/bash

# Pre-commit hook for AIBOTTO quality checks
# This runs automatically before every commit

# Get the directory where this hook is located
HOOK_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$HOOK_DIR/../.." && pwd)"

# Change to the project directory
cd "$PROJECT_ROOT"

# Path to the quality checks script
QUALITY_CHECKS_SCRIPT="./pre-commit-checks.sh"

# Check if the quality checks script exists
if [ ! -f "$QUALITY_CHECKS_SCRIPT" ]; then
    echo "‚ùå Quality checks script not found at $QUALITY_CHECKS_SCRIPT"
    echo "Please ensure the script exists and is executable."
    exit 1
fi

# Make the script executable if it's not already
chmod +x "$QUALITY_CHECKS_SCRIPT"

# Run the quality checks
echo "üîç Running pre-commit quality checks..."
if "$QUALITY_CHECKS_SCRIPT"; then
    echo "‚úÖ All quality checks passed!"
    exit 0
else
    echo "‚ùå Quality checks failed. Please fix the issues above before committing."
    exit 1
fi